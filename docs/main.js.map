{"version":3,"sources":["webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/components/canvas/canvas.component.html","webpack:///./src/app/components/canvas/canvas.component.scss","webpack:///./src/app/components/canvas/canvas.component.ts","webpack:///./src/app/components/circle/circle.component.ts","webpack:///./src/app/components/color-picker/color-picker.component.ts","webpack:///./src/app/components/index.ts","webpack:///./src/app/components/masthead/masthead.component.scss","webpack:///./src/app/components/masthead/masthead.component.ts","webpack:///./src/app/components/options-bar/options-bar.component.ts","webpack:///./src/app/components/panel/panel.component.scss","webpack:///./src/app/components/panel/panel.component.ts","webpack:///./src/app/components/polyline/polyline.component.ts","webpack:///./src/app/components/rect/rect.component.ts","webpack:///./src/app/components/svg-icon/svg-icon.component.ts","webpack:///./src/app/components/toolbar-item/toolbar-item.component.scss","webpack:///./src/app/components/toolbar-item/toolbar-item.component.ts","webpack:///./src/app/components/toolbar/toolbar.component.scss","webpack:///./src/app/components/toolbar/toolbar.component.ts","webpack:///./src/app/components/users/users.component.ts","webpack:///./src/app/directives/cursorable/cursorable.directive.ts","webpack:///./src/app/directives/mouse/mouse-service.directive.ts","webpack:///./src/app/math/point2d.ts","webpack:///./src/app/modules/tools/components/drawing-tool/drawing-tool.component.ts","webpack:///./src/app/modules/tools/components/geometry-tool/geometry-tool.component.ts","webpack:///./src/app/modules/tools/shapes/circle/circle.ts","webpack:///./src/app/modules/tools/shapes/index.ts","webpack:///./src/app/modules/tools/shapes/polyline-shape.ts","webpack:///./src/app/modules/tools/shapes/rect/rect.ts","webpack:///./src/app/modules/tools/shapes/shape.ts","webpack:///./src/app/modules/tools/tools.module.ts","webpack:///./src/app/modules/tools/tools.ts","webpack:///./src/app/modules/tools/types/tools.ts","webpack:///./src/app/services/canvas/canvas.service.ts","webpack:///./src/app/store/actions/app.actions.ts","webpack:///./src/app/store/app-store.module.ts","webpack:///./src/app/store/reducers/app.reducer.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error('Cannot find module \"' + req + '\".');\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  template: `\n    <div class=\"container\">\n      <app-masthead></app-masthead>\n      <app-toolbar></app-toolbar>\n      <app-options-bar></app-options-bar>\n      <app-users></app-users>\n      <app-canvas></app-canvas>\n    </div>\n  `\n})\nexport class AppComponent {\n}\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { HttpModule } from '@angular/http';\nimport { FormsModule } from '@angular/forms';\nimport { AppStoreModule } from '@store/app-store.module';\nimport { AppComponent } from './app.component';\nimport { ToolsModule } from '@tools/tools.module';\nimport { CursorableDirective } from './directives/cursorable/cursorable.directive';\nimport { commonComponents } from '@components';\nimport { MouseServiceDirective } from '@directives/mouse/mouse-service.directive';\nimport { CanvasService } from '@services/canvas/canvas.service';\nimport { PolylineComponent } from './components/polyline/polyline.component';\nimport { CircleComponent } from './components/circle/circle.component';\nimport { RectComponent } from './components/rect/rect.component';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    CursorableDirective,\n    MouseServiceDirective,\n    ...commonComponents,\n    PolylineComponent,\n    CircleComponent,\n    RectComponent\n  ],\n  imports: [\n    BrowserModule,\n    HttpModule,\n    AppStoreModule,\n    ToolsModule,\n    FormsModule\n  ],\n  providers: [CanvasService],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","module.exports = \"<app-panel [panelTitle]=\\\"title\\\" class=\\\"canvas__panel\\\">\\n    <svg xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n      id=\\\"svg\\\"\\n      viewBox=\\\"0 0 14000 14000\\\"\\n      width=\\\"14000\\\"\\n      height=\\\"14000\\\"\\n      #svg\\n      [appCursorable]=\\\"toolChange\\\"\\n      appMouseService\\n    >\\n      <defs>\\n          <pattern id=\\\"grid\\\"\\n            patternUnits=\\\"userSpaceOnUse\\\"\\n            width=\\\"10\\\"\\n            height=\\\"10\\\">\\n              <line x1=\\\"5\\\" y1=\\\"0\\\" x2=\\\"5\\\" y2=\\\"10\\\" />\\n              <line x1=\\\"0\\\" y1=\\\"5\\\" x2=\\\"10\\\" y2=\\\"5\\\" />\\n          </pattern>\\n      </defs>\\n      <rect width=\\\"100%\\\" height=\\\"100%\\\" fill=\\\"url(#grid)\\\" />\\n\\n      <g id=\\\"polylines\\\">\\n        <ng-container *ngFor=\\\"let polyline of canvasService.polylines$ | async\\\">\\n          <g [appPolyline]=\\\"polyline\\\" *ngIf=\\\"!polyline.editing\\\"></g>\\n          <polyline *ngIf=\\\"polyline.editing\\\"\\n            [attr.points]=\\\"polyline.toString()\\\"\\n            [attr.fill]=\\\"polyline.fill\\\"\\n            [attr.stroke]=\\\"polyline.stroke\\\"\\n            [attr.stroke-width]=\\\"polyline.strokeWidth\\\"/>\\n        </ng-container>\\n      </g>\\n\\n      <g id=\\\"circles\\\">\\n        <ng-container *ngFor=\\\"let circle of canvasService.circles$ | async\\\">\\n          <g [appCircle]=\\\"circle\\\" *ngIf=\\\"!circle.editing\\\"></g>\\n          <circle\\n            [attr.cx]=\\\"circle.cx\\\"\\n            [attr.cy]=\\\"circle.cy\\\"\\n            [attr.r]=\\\"circle.r\\\"\\n            [attr.fill]=\\\"circle.fill\\\"\\n            [attr.stroke]=\\\"circle.stroke\\\"\\n            [attr.stroke-width]=\\\"circle.strokeWidth\\\"\\n          />\\n        </ng-container>\\n      </g>\\n\\n      <g id=\\\"rects\\\">\\n        <ng-container *ngFor=\\\"let rect of canvasService.rects$ | async\\\">\\n          <g [appCircle]=\\\"rect\\\" *ngIf=\\\"!rect.editing\\\"></g>\\n          <rect\\n            [attr.x]=\\\"rect.x\\\"\\n            [attr.y]=\\\"rect.y\\\"\\n            [attr.width]=\\\"rect.width\\\"\\n            [attr.height]=\\\"rect.height\\\"\\n            [attr.fill]=\\\"rect.fill\\\"\\n            [attr.stroke]=\\\"rect.stroke\\\"\\n            [attr.rx]=\\\"rect.rx\\\"\\n            [attr.ry]=\\\"rect.ry\\\"\\n            [attr.stroke-width]=\\\"rect.strokeWidth\\\"\\n          />\\n        </ng-container>\\n      </g>\\n\\n      <ng-container #vcr></ng-container>\\n    </svg>\\n</app-panel>\\n\"","module.exports = \"#grid > line {\\n  stroke: #e0e3e5;\\n  stroke-width: 1px; }\\n\\n.cursor__pencil {\\n  cursor: url(data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUzLjI1NSA1My4yNTUiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUzLjI1NSA1My4yNTU7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iMTZweCIgaGVpZ2h0PSIxNnB4Ij4KPHBhdGggc3R5bGU9ImZpbGw6I0Q3NUE0QTsiIGQ9Ik0zOS41OTgsMi4zNDNjMy4xMjQtMy4xMjQsOC4xOS0zLjEyNCwxMS4zMTQsMHMzLjEyNCw4LjE5LDAsMTEuMzE0TDM5LjU5OCwyLjM0M3oiLz4KPHBvbHlnb24gc3R5bGU9ImZpbGw6I0VEOEExOTsiIHBvaW50cz0iNDIuNDI2LDE3Ljg5OSAxNi41MTIsNDMuODE0IDE1Ljk4Miw0OC41ODcgNDQuNTQ4LDIwLjAyIDQ0LjU0OCwyMC4wMiAiLz4KPHBvbHlnb24gc3R5bGU9ImZpbGw6I0VEOEExOTsiIHBvaW50cz0iMTAuMzI1LDQyLjkzIDE1LjA5OCw0Mi40IDQxLjAxMiwxNi40ODUgMzYuNzcsMTIuMjQzIDEwLjg1NSwzOC4xNTcgIi8+Cjxwb2x5Z29uIHN0eWxlPSJmaWxsOiNFRDhBMTk7IiBwb2ludHM9IjM1LjM1NiwxMC44MjkgMzMuMjM0LDguNzA3IDMzLjIzNCw4LjcwNyA0LjY2OCwzNy4yNzMgOS40NDEsMzYuNzQzICIvPgo8cG9seWdvbiBzdHlsZT0iZmlsbDojQzdDQUM3OyIgcG9pbnRzPSI0OC43OSwxNS43NzggNDguNzksMTUuNzc4IDUwLjkxMiwxMy42NTcgMzkuNTk4LDIuMzQzIDM3LjQ3Niw0LjQ2NSAzNy40NzcsNC40NjUgIi8+Cjxwb2x5Z29uIHN0eWxlPSJmaWxsOiNDN0NBQzc7IiBwb2ludHM9IjM2LjA2Miw1Ljg3OSAzNi4wNjIsNS44NzkgMzQuNjQ4LDcuMjkzIDM0LjY0OCw3LjI5MyA0NS45NjIsMTguNjA2IDQ1Ljk2MiwxOC42MDYgICA0Ny4zNzYsMTcuMTkyIDQ3LjM3NiwxNy4xOTIgIi8+CjxwYXRoIHN0eWxlPSJmaWxsOiNGQkNFOUQ7IiBkPSJNMTQuNDI0LDQ0LjQ4OGwtNS4xMjIsMC41NjljLTAuMDM2LDAuMDA0LTAuMDczLDAuMDA2LTAuMTA5LDAuMDA2YzAsMC0wLjAwMSwwLTAuMDAxLDBIOS4xOTJIOS4xOTIgIGMtMC4wMDEsMC0wLjAwMSwwLTAuMDAxLDBjLTAuMDM2LDAtMC4wNzMtMC4wMDItMC4xMDktMC4wMDZjLTAuMDM5LTAuMDA0LTAuMDcxLTAuMDI2LTAuMTA4LTAuMDM1ICBjLTAuMDcyLTAuMDE3LTAuMTQxLTAuMDM1LTAuMjA3LTAuMDY3Yy0wLjA1LTAuMDI0LTAuMDkzLTAuMDUzLTAuMTM4LTAuMDg0Yy0wLjA1Ny0wLjA0LTAuMTA5LTAuMDgzLTAuMTU3LTAuMTM0ICBjLTAuMDM4LTAuMDQtMC4wNjktMC4wODEtMC4xLTAuMTI3Yy0wLjAzOC0wLjA1Ny0wLjA2OS0wLjExNi0wLjA5NS0wLjE4MWMtMC4wMjItMC4wNTQtMC4wMzgtMC4xMDctMC4wNS0wLjE2NSAgYy0wLjAwNy0wLjAzMi0wLjAyNC0wLjA1OS0wLjAyOC0wLjA5MmMtMC4wMDQtMC4wMzgsMC4wMS0wLjA3MywwLjAxLTAuMTFjMC0wLjAzOC0wLjAxNC0wLjA3Mi0wLjAxLTAuMTFsMC41NjktNS4xMjJsLTUuMTIyLDAuNTY5ICBjLTAuMDM3LDAuMDA0LTAuMDc1LDAuMDA2LTAuMTExLDAuMDA2Yy0wLjA3OSwwLTAuMTUyLTAuMDI0LTAuMjI3LTAuMDQyTDAuNDQyLDUxLjM5OWwyLjEwNi0yLjEwNmMwLjM5MS0wLjM5MSwxLjAyMy0wLjM5MSwxLjQxNCwwICBzMC4zOTEsMS4wMjMsMCwxLjQxNGwtMi4xMDYsMi4xMDZsMTIuMDMtMi44NjRjLTAuMDI2LTAuMTA5LTAuMDQzLTAuMjIyLTAuMDMtMC4zMzlMMTQuNDI0LDQ0LjQ4OHoiLz4KPHBhdGggc3R5bGU9ImZpbGw6IzM4NDU0RjsiIGQ9Ik0zLjk2Miw0OS4yOTNjLTAuMzkxLTAuMzkxLTEuMDIzLTAuMzkxLTEuNDE0LDBsLTIuMTA2LDIuMTA2TDAsNTMuMjU1bDEuODU2LTAuNDQybDIuMTA2LTIuMTA2ICBDNC4zNTIsNTAuMzE2LDQuMzUyLDQ5LjY4NCwzLjk2Miw0OS4yOTN6Ii8+Cjxwb2x5Z29uIHN0eWxlPSJmaWxsOiNGMkVDQkY7IiBwb2ludHM9IjQ4Ljc5LDE1Ljc3OCAzNy40NzcsNC40NjUgMzcuNDc2LDQuNDY1IDM2LjA2Miw1Ljg3OSAzNi4wNjIsNS44NzkgNDcuMzc2LDE3LjE5MiAgIDQ3LjM3NiwxNy4xOTIgNDguNzksMTUuNzc4ICIvPgo8cGF0aCBzdHlsZT0iZmlsbDojRUJCQTE2OyIgZD0iTTQxLjAxMiwxNi40ODVMMTUuMDk4LDQyLjRsLTQuNzczLDAuNTNsMC41My00Ljc3M0wzNi43NywxMi4yNDNsLTEuNDE0LTEuNDE0TDkuNDQxLDM2Ljc0MyAgbC00Ljc3MywwLjUzbC0xLjEzMywxLjEzM2wtMC4yMjgsMC45NTdjMC4wNzUsMC4wMTgsMC4xNDcsMC4wNDIsMC4yMjcsMC4wNDJjMC4wMzYsMCwwLjA3NC0wLjAwMiwwLjExMS0wLjAwNmw1LjEyMi0wLjU2OSAgbC0wLjU2OSw1LjEyMmMtMC4wMDQsMC4wMzgsMC4wMSwwLjA3MywwLjAxLDAuMTFjMCwwLjAzOC0wLjAxNCwwLjA3Mi0wLjAxLDAuMTFjMC4wMDQsMC4wMzMsMC4wMjEsMC4wNiwwLjAyOCwwLjA5MiAgYzAuMDEyLDAuMDU3LDAuMDI5LDAuMTEyLDAuMDUsMC4xNjVjMC4wMjYsMC4wNjQsMC4wNTcsMC4xMjQsMC4wOTUsMC4xODFjMC4wMywwLjA0NSwwLjA2MywwLjA4OCwwLjEsMC4xMjcgIGMwLjA0NywwLjA1LDAuMSwwLjA5NCwwLjE1NywwLjEzNGMwLjA0NCwwLjAzMSwwLjA4OSwwLjA2MSwwLjEzOCwwLjA4NGMwLjA2NSwwLjAzMSwwLjEzNSwwLjA1LDAuMjA3LDAuMDY3ICBjMC4wMzgsMC4wMDksMC4wNjksMC4wMywwLjEwOCwwLjAzNWMwLjAzNiwwLjAwNCwwLjA3MiwwLjAwNiwwLjEwOSwwLjAwNmgwLjAwMWgwaDAuMDAxaDAuMDAxYzAsMCwwLjAwMSwwLDAuMDAxLDBoMCAgYzAuMDM1LDAsMC4wNzItMC4wMDIsMC4xMDktMC4wMDZsNS4xMjItMC41NjlsLTAuNTY5LDUuMTIyYy0wLjAxMywwLjExOCwwLjAwNCwwLjIzLDAuMDMsMC4zMzlsMC45NjMtMC4yMjlsMS4xMzMtMS4xMzJsMC41My00Ljc3MyAgbDI1LjkxNC0yNS45MTVMNDEuMDEyLDE2LjQ4NXoiLz4KPHBvbHlnb24gc3R5bGU9ImZpbGw6I0YyRUNCRjsiIHBvaW50cz0iNDUuOTYyLDE4LjYwNiAzNC42NDgsNy4yOTMgMzQuNjQ4LDcuMjkzIDMzLjIzNCw4LjcwNyAzMy4yMzQsOC43MDcgMzUuMzU2LDEwLjgyOSAgIDM2Ljc3LDEyLjI0MyA0MS4wMTIsMTYuNDg1IDQyLjQyNiwxNy44OTkgNDQuNTQ4LDIwLjAyIDQ0LjU0OCwyMC4wMiA0NS45NjIsMTguNjA2ICIvPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8L3N2Zz4K) 0 15, auto; }\\n\\n.cursor__brush {\\n  cursor: url(data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iMTZweCIgaGVpZ2h0PSIxNnB4Ij4KPGc+Cgk8Zz4KCQk8cGF0aCBkPSJNMjU2LDBDMTE0LjgzMywwLDAsMTE0Ljg0NCwwLDI1NnMxMTQuODMzLDI1NiwyNTYsMjU2czI1Ni0xMTQuODQ0LDI1Ni0yNTZTMzk3LjE2NywwLDI1NiwweiBNMjU2LDQ5MC42NjcgICAgQzEyNi42MDQsNDkwLjY2NywyMS4zMzMsMzg1LjM5NiwyMS4zMzMsMjU2UzEyNi42MDQsMjEuMzMzLDI1NiwyMS4zMzNTNDkwLjY2NywxMjYuNjA0LDQ5MC42NjcsMjU2UzM4NS4zOTYsNDkwLjY2NywyNTYsNDkwLjY2N3ogICAgIiBmaWxsPSIjMDAwMDAwIi8+Cgk8L2c+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPC9zdmc+Cg==) 8 8, auto; }\\n\\n.cursor__rect {\\n  cursor: crosshair; }\\n\"","import {\n  Component,\n  OnInit,\n  ViewChild,\n  ViewContainerRef,\n  ComponentFactoryResolver,\n  ElementRef,\n  ReflectiveInjector\n} from '@angular/core';\nimport { AppState } from '@store/app-state';\nimport { Store } from '@ngrx/store';\nimport { Observable } from 'rxjs/Observable';\nimport { Tool } from '@tools/types/tool';\nimport { of } from 'rxjs/observable/of';\nimport { CanvasService } from '@services/canvas/canvas.service';\n\n@Component({\n  selector: 'app-canvas',\n  templateUrl: './canvas.component.html',\n  styleUrls: [ './canvas.component.scss' ]\n})\nexport class CanvasComponent implements OnInit {\n  title = 'Canvas';\n  toolChange: Observable<Tool>;\n\n  @ViewChild('vcr', { read: ViewContainerRef }) vcr: ViewContainerRef;\n  @ViewChild('svg') svgRef: ElementRef;\n\n  constructor(\n    private store: Store<AppState>,\n    private componentFactoryResolver: ComponentFactoryResolver,\n    public canvasService: CanvasService\n  ) { }\n\n  ngOnInit(): void {\n    this.toolChange = this.store\n      .select('app')\n      .select('selectedTool');\n\n    this.toolChange\n      .subscribe(this.loadComponent);\n  }\n\n  loadComponent = (tool: Tool): void => {\n    this.vcr.clear();\n\n    if (!tool) {\n      return;\n    }\n\n    const componentFactory = this.componentFactoryResolver\n      .resolveComponentFactory(tool.component);\n\n    const componentRef = this.vcr.createComponent(componentFactory);\n  }\n}\n","import {\n  Component,\n  Input,\n  ChangeDetectionStrategy\n} from '@angular/core';\nimport { CircleShape } from '@shapes/circle/circle';\n\n@Component({\n  selector: '[appCircle]',\n  template: `\n    <svg:circle\n      [attr.cx]=\"circle.cx\"\n      [attr.cy]=\"circle.cy\"\n      [attr.r]=\"circle.r\"\n      [attr.fill]=\"circle.fill\"\n      [attr.stroke]=\"circle.stroke\"\n      [attr.stroke-width]=\"circle.strokeWidth\"\n    />\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class CircleComponent {\n  @Input('appCircle') circle: CircleShape;\n}\n","import { Component, OnInit, ViewChild, ElementRef, Renderer2 } from '@angular/core';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@store/app-state';\nimport { Observable } from 'rxjs/Observable';\nimport * as AppActions from '@store/actions/app.actions';\nimport { SelectColor, SelectTool } from '../../store/actions/app.actions';\n\n@Component({\n  selector: 'app-color-picker',\n  template: `\n    <input type=\"color\"\n      #colorPicker\n      (click)=\"handleOpen()\"\n      [ngModel]=\"selectedColor$ | async\"\n      (ngModelChange)=\"handleChange($event)\">\n  `,\n  styles: []\n})\nexport class ColorPickerComponent implements OnInit {\n  selectedColor$: Observable<string>;\n  @ViewChild('colorPicker') colorPicker: ElementRef;\n  constructor(\n    private store: Store<AppState>,\n    private renderer: Renderer2\n  ) { }\n\n  ngOnInit(): void {\n    this.selectedColor$ = this.store\n      .select('app')\n      .select('selectedColor');\n  }\n\n  handleChange(color: string): void {\n    this.store.dispatch(new AppActions.SelectColor(color));\n  }\n\n  handleOpen(): void {\n    this.store.dispatch(new AppActions.SelectTool(null));\n  }\n}\n","import { MastheadComponent } from './masthead/masthead.component';\nimport { OptionsBarComponent } from './options-bar/options-bar.component';\nimport { PanelComponent } from './panel/panel.component';\nimport { SvgIconComponent } from './svg-icon/svg-icon.component';\nimport { ToolbarComponent } from './toolbar/toolbar.component';\nimport { ToolbarItemComponent } from './toolbar-item/toolbar-item.component';\nimport { UsersComponent } from './users/users.component';\nimport { CanvasComponent } from './canvas/canvas.component';\nimport { ColorPickerComponent } from './color-picker/color-picker.component';\n\nexport const commonComponents = [\n  MastheadComponent,\n  OptionsBarComponent,\n  PanelComponent,\n  SvgIconComponent,\n  ToolbarComponent,\n  ToolbarItemComponent,\n  UsersComponent,\n  CanvasComponent,\n  ColorPickerComponent\n];\n\nexport {\n  MastheadComponent,\n  OptionsBarComponent,\n  PanelComponent,\n  SvgIconComponent,\n  ToolbarComponent,\n  ToolbarItemComponent,\n  UsersComponent,\n  CanvasComponent,\n  ColorPickerComponent\n};\n","module.exports = \".masthead {\\n  display: flex;\\n  align-items: center;\\n  justify-content: flex-start;\\n  height: 100%;\\n  background-color: #ffffff;\\n  box-shadow: 0 0 11px rgba(0, 0, 0, 0.13); }\\n  .masthead__logo {\\n    display: flex;\\n    align-items: center;\\n    height: 100%;\\n    padding: 0 20px;\\n    font-size: 15px;\\n    font-weight: 100;\\n    background-color: #353c4e;\\n    cursor: default; }\\n\"","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-masthead',\n  template: `\n    <div class=\"masthead\">\n      <div class=\"masthead__logo\">Angular<b>Paint</b></div>\n    </div>\n  `,\n  styleUrls: ['./masthead.component.scss']\n})\nexport class MastheadComponent {\n\n  constructor() { }\n\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-options-bar',\n  template: `\n    <app-panel [panelTitle]=\"title\">\n      <app-color-picker></app-color-picker>\n    </app-panel>\n  `\n})\nexport class OptionsBarComponent implements OnInit {\n  title = 'Adjustments';\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","module.exports = \":host {\\n  display: flex;\\n  height: 100%;\\n  width: 100%; }\\n\\n.panel {\\n  background-color: white;\\n  font-size: 12px;\\n  border-radius: 1px;\\n  box-shadow: 0 1px 11px 0 rgba(0, 0, 0, 0.12);\\n  border-radius: 5px;\\n  color: #505458;\\n  overflow: auto;\\n  width: 100%; }\\n\\n.panel__title {\\n    font-weight: 600;\\n    cursor: default;\\n    margin-bottom: 10px;\\n    padding: 5px; }\\n\\n.panel__content {\\n    line-height: 16px;\\n    padding: 5px; }\\n\"","import { Component, Input, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-panel',\n  template: `\n    <div class=\"panel\">\n      <div class=\"panel__title\" *ngIf=\"panelTitle\">\n          {{panelTitle}}\n      </div>\n      <div class=\"panel__content\">\n        <ng-content></ng-content>\n      </div>\n    </div>\n  `,\n  styleUrls: ['./panel.component.scss']\n})\nexport class PanelComponent implements OnInit {\n  @Input() panelTitle: string;\n\n  ngOnInit(): void {\n\n  }\n}\n","import {\n  Component,\n  Input,\n  ChangeDetectionStrategy\n} from '@angular/core';\nimport { PolylineShape } from '@tools/shapes';\n\n@Component({\n  selector: '[appPolyline]',\n  template: `\n    <svg:polyline\n      [attr.points]=\"polyline.toString()\"\n      [attr.fill]=\"polyline.fill\"\n      [attr.stroke]=\"polyline.stroke\"\n      [attr.stroke-width]=\"polyline.strokeWidth\"\n    />\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class PolylineComponent {\n  @Input('appPolyline') polyline: PolylineShape;\n}\n","import {\n  Component,\n  Input,\n  ChangeDetectionStrategy\n} from '@angular/core';\nimport { RectShape } from '@shapes/rect/rect';\n\n@Component({\n  selector: '[appRect]',\n  template: `\n    <svg:rect\n      [attr.x]=\"rect.x\"\n      [attr.y]=\"rect.y\"\n      [attr.width]=\"rect.width\"\n      [attr.height]=\"rect.height\"\n      [attr.fill]=\"rect.fill\"\n      [attr.stroke]=\"rect.stroke\"\n      [attr.rx]=\"rect.rx\"\n      [attr.ry]=\"rect.ry\"\n      [attr.stroke-width]=\"rect.strokeWidth\"\n    />\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class RectComponent {\n  @Input('appRect') rect: RectShape;\n}\n","import {\n  Component,\n  Input,\n  ChangeDetectionStrategy,\n  Renderer,\n  ElementRef\n} from '@angular/core';\nimport { Http, Response } from '@angular/http';\n\n@Component({\n  selector: 'app-svg-icon',\n  template: '<ng-content></ng-content>',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class SvgIconComponent {\n  @Input()\n  set imageUrl(imageUrl: string) {\n    this.load(imageUrl);\n  }\n\n  constructor(\n    private http: Http,\n    private renderer: Renderer,\n    private elementRef: ElementRef\n  ) {}\n\n  load(imageUrl: string): void {\n    this.http.get(imageUrl)\n      .subscribe((response: Response) => {\n        const element = <HTMLElement>this.elementRef.nativeElement;\n        element.innerHTML = '';\n\n        const iconStr = response.text();\n        const parser = new DOMParser();\n        const svg = parser.parseFromString(iconStr, 'image/svg+xml');\n\n        this.renderer.projectNodes(element, [svg.documentElement]);\n      });\n  }\n}\n","module.exports = \".tool-item {\\n  width: 20px;\\n  height: 20px;\\n  margin-bottom: 10px; }\\n\"","import {\n  Component,\n  Input,\n  Output,\n  EventEmitter\n} from '@angular/core';\nimport { Tool } from '@tools/types/tool';\nimport { Observable } from 'rxjs/Observable';\nimport {\n  trigger,\n  state,\n  style,\n  transition,\n  animate\n} from '@angular/animations';\n\n@Component({\n  selector: 'app-toolbar-item',\n  template: `\n    <div class=\"tool-item\" [@toolState]=\"toolState\">\n      <app-svg-icon [imageUrl]=\"tool.imageUrl\"\n        (mousedown)=\"handleSelect($event)\">\n      </app-svg-icon>\n    </div>\n  `,\n  animations: [\n    trigger('toolState', [\n      state('inactive', style({\n        transform: 'scale(1)'\n      })),\n      state('active', style({\n        transform: 'scale(1.4)'\n      })),\n      transition('inactive => active', animate('200ms ease-in-out')),\n      transition('active => inactive', animate('100ms ease-out'))\n    ])\n  ],\n  styleUrls: [ './toolbar-item.component.scss' ]\n})\nexport class ToolbarItemComponent {\n  toolState = 'inactive';\n  @Output() select: EventEmitter<Tool> = new EventEmitter<Tool>();\n  @Input() tool: Tool;\n  @Input()\n  set selected(isSelected: boolean) {\n    this.toolState = isSelected ? 'active' : 'inactive';\n  }\n\n  handleSelect(evt: MouseEvent): void {\n    evt.stopPropagation();\n    this.select.emit(this.tool);\n  }\n}\n","module.exports = \".toolbar-list {\\n  display: flex;\\n  justify-content: space-around;\\n  flex-wrap: wrap; }\\n\"","import {\n  Component,\n  OnInit,\n  Inject,\n  HostListener,\n  OnDestroy\n} from '@angular/core';\nimport * as AppActions from '@store/actions/app.actions';\nimport { TOOLS_TOKEN } from '@tools/tools';\nimport { Tool } from '@tools/types/tool';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@store/app-state';\nimport { Observable } from 'rxjs/Observable';\nimport { Subject } from 'rxjs/Subject';\nimport { takeUntil } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-toolbar',\n  template: `\n    <app-panel [panelTitle]=\"title\">\n      <div class=\"toolbar-list\">\n        <app-toolbar-item\n          *ngFor=\"let tool of tools\"\n          [tool]=\"tool\"\n          [selected]=\"isSelected(tool)\"\n          (select)=\"handleSelect($event)\">\n        </app-toolbar-item>\n      </div>\n    </app-panel>\n  `,\n  styleUrls: [ './toolbar.component.scss' ]\n})\nexport class ToolbarComponent implements OnInit, OnDestroy {\n  title = 'Tools';\n  selectedTool: Tool;\n  selectedTool$: Observable<Tool>;\n  destroy$: Subject<boolean> = new Subject<boolean>();\n\n  constructor(\n    @Inject(TOOLS_TOKEN) public tools: Tool[],\n    private store: Store<AppState>\n  ) {}\n\n  ngOnInit(): void {\n    this.store\n      .select('app')\n      .select('selectedTool')\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((tool: Tool) => this.selectedTool = tool);\n  }\n\n  isSelected(tool: Tool): boolean {\n    return this.selectedTool === tool;\n  }\n\n  handleSelect(tool: Tool): void {\n    this.store.dispatch(new AppActions.SelectTool(tool));\n\n    const thickness = tool.name === 'pencil' ? 2 : 10;\n    this.store.dispatch(new AppActions.ChangeThickness(thickness));\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next(true);\n    this.destroy$.unsubscribe();\n  }\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-users',\n  template: `\n    <app-panel [panelTitle]=\"title\">\n      <div>User 1</div>\n      <div>User 1</div>\n      <div>User 1</div>\n      <div>User 1</div>\n      <div>User 1</div>\n      <div>User 1</div>\n      <div>User 1</div>\n      <div>User 1</div>\n      <div>User 1</div>\n    </app-panel>\n  `\n})\nexport class UsersComponent implements OnInit {\n  title = 'Users';\n\n  ngOnInit(): void {\n  }\n\n}\n","import {\n  Directive,\n  OnInit,\n  Input,\n  Renderer2,\n  ElementRef\n} from '@angular/core';\nimport { AppState } from '@store/app-state';\nimport { Observable } from 'rxjs/Observable';\nimport { Tool } from '@tools/types/tool';\n\n@Directive({\n  selector: '[appCursorable]'\n})\nexport class CursorableDirective implements OnInit {\n  @Input('appCursorable') toolChanges: Observable<Tool>;\n  selectedTool: Tool;\n  constructor(\n    private elementRef: ElementRef,\n    private renderer: Renderer2\n  ) {}\n\n  ngOnInit(): void {\n    this.toolChanges\n      .subscribe((tool: Tool) => {\n        if (this.selectedTool) {\n          this.renderer.removeClass(\n            this.elementRef.nativeElement,\n            `cursor__${this.selectedTool.name}`\n          );\n        }\n\n        if (!tool) {\n          return;\n        }\n\n        this.renderer.addClass(\n          this.elementRef.nativeElement,\n          `cursor__${tool.name}`\n        );\n\n        this.selectedTool = tool;\n      });\n  }\n\n}\n","import { Directive, ElementRef } from '@angular/core';\nimport { Observable } from 'rxjs/Observable';\nimport { fromEvent } from 'rxjs/observable/fromEvent';\nimport { Point2D } from '@math/point2d';\nimport { map, tap } from 'rxjs/operators';\nimport { merge } from 'rxjs/observable/merge';\n\n@Directive({\n  selector: '[appMouseService]'\n})\nexport class MouseServiceDirective {\n  constructor(private elRef: ElementRef) {\n  }\n\n  fromEvent(name: string): Observable<MouseEvent> {\n    return fromEvent(this.elRef.nativeElement, name)\n      .pipe(tap((evt: MouseEvent) => evt.preventDefault()));\n  }\n\n  onMouseUp(): Observable<Point2D> {\n    return this.fromEvent('mouseup').pipe(map(this.toCoords));\n  }\n\n  onMouseDown(): Observable<Point2D> {\n    return this.fromEvent('mousedown').pipe(map(this.toCoords));\n  }\n\n  onMouseMove(): Observable<Point2D> {\n    return this.fromEvent('mousemove').pipe(map(this.toCoords));\n  }\n\n  onMouseLeave(): Observable<MouseEvent> {\n    return this.fromEvent('mouseleave');\n  }\n\n  onEnd(): Observable<MouseEvent> {\n    return merge(\n      this.fromEvent('mouseup'),\n      this.fromEvent('mouseleave')\n    );\n  }\n\n  toCoords = (evt: MouseEvent): Point2D => {\n    const p = this.elRef.nativeElement.createSVGPoint();\n    p.x = evt.clientX;\n    p.y = evt.clientY;\n\n    const point = p.matrixTransform(\n      this.elRef.nativeElement.getScreenCTM().inverse()\n    );\n\n    return new Point2D(point.x, point.y);\n  }\n}\n","export class Point2D {\n  static add(p1: Point2D, p2: Point2D): Point2D {\n    return new Point2D(p1.x + p2.x, p1.y + p2.y);\n  }\n\n  static getMidpoint(p1: Point2D, p2: Point2D): Point2D {\n    return Point2D.getDifference(p1, p2).divideBy(2).add(p1);\n  }\n\n  static getDifference(p1: Point2D, p2: Point2D): Point2D {\n    return new Point2D(p2.x - p1.x, p2.y - p1.y);\n  }\n\n  static size(p1: Point2D): number {\n    return Math.sqrt((Math.pow(p1.x, 2) + Math.pow(p1.y, 2)));\n  }\n\n  constructor(\n    public x: number = 0,\n    public y: number = 0\n  ) {}\n\n  divideBy(num: number): this {\n    this.x = this.x / num;\n    this.y = this.y / num;\n\n    return this;\n  }\n\n  add(p: Point2D): this {\n    this.x += p.x;\n    this.y += p.y;\n\n    return this;\n  }\n}\n","import { Observable } from 'rxjs/Observable';\nimport { fromEvent } from 'rxjs/observable/fromEvent';\nimport { Subject } from 'rxjs/Subject';\nimport { takeUntil, mergeMap, withLatestFrom } from 'rxjs/operators';\nimport { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Point2D } from '@math/point2d';\nimport { Shape, CircleShape, PolylineShape } from '@shapes';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@store/app-state';\nimport { of } from 'rxjs/observable/of';\nimport { CanvasService } from '@services/canvas/canvas.service';\nimport { PartialObserver } from 'rxjs/Observer';\nimport { MouseServiceDirective } from '@directives/mouse/mouse-service.directive';\nimport * as AppActions from '@store/actions/app.actions';\n\n@Component({\n  selector: 'app-drawing-tool',\n  template: ''\n})\nexport class DrawingToolComponent implements OnInit, OnDestroy {\n  private selectedColor$: Observable<string>;\n  private thickness$: Observable<number>;\n  private destroy$: Subject<boolean> = new Subject<boolean>();\n  constructor(\n    private store: Store<AppState>,\n    private mouseService: MouseServiceDirective,\n    private canvasService: CanvasService\n  ) {}\n\n  ngOnInit(): void {\n    this.selectedColor$ = this.store\n      .select('app')\n      .select('selectedColor');\n\n    this.thickness$ = this.store\n      .select('app')\n      .select('thickness');\n\n    this.mouseService.onMouseDown()\n      .pipe(\n        withLatestFrom(this.thickness$, this.selectedColor$),\n        takeUntil(this.destroy$)\n      )\n      .subscribe(this.handleMouseDown);\n  }\n\n  handleMouseDown = ([p, thickness, selectedColor]: [Point2D, number, string]): void => {\n    const circle = new CircleShape(p, thickness / 2, selectedColor);\n    const polyline = new PolylineShape([p], thickness, selectedColor);\n\n    of(p)\n      .pipe(\n        mergeMap(() => this.mouseService.onMouseMove()),\n        takeUntil(this.mouseService.onEnd()),\n        withLatestFrom(this.canvasService.canvasShapes$)\n      )\n      .subscribe(this.polylineObserver(polyline));\n\n    this.canvasService.render(circle);\n    this.flushShape(circle);\n  }\n\n  polylineObserver(polyline: PolylineShape): PartialObserver<[Point2D, Shape[]]> {\n    return {\n      next: ([pt, canvasShapes]: [Point2D, Shape[]]): void => {\n        if (!canvasShapes.includes(polyline)) {\n          this.canvasService.render(polyline);\n        }\n        polyline.append(pt);\n      },\n      complete: (): void => {\n        if (!this.shouldPolylineCreate(polyline)) {\n          return;\n        }\n        this.flushShape(polyline);\n      }\n    };\n  }\n\n  flushShape(shape: Shape): void {\n    this.canvasService.complete(shape);\n    this.store.dispatch(new AppActions.CreateShape(shape));\n  }\n\n  shouldPolylineCreate(polyline: PolylineShape): boolean {\n    return polyline.length() > 1;\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next(true);\n    this.destroy$.unsubscribe();\n  }\n}\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { MouseServiceDirective } from '@directives/mouse/mouse-service.directive';\nimport { takeUntil, mergeMap, withLatestFrom } from 'rxjs/operators';\nimport { Subject } from 'rxjs/Subject';\nimport { Point2D } from '@math/point2d';\nimport { RectShape } from '@shapes/rect/rect';\nimport { of } from 'rxjs/observable/of';\nimport { CanvasService } from '@services/canvas/canvas.service';\nimport { PartialObserver } from 'rxjs/Observer';\nimport * as AppActions from '@store/actions/app.actions';\nimport { Shape } from '@shapes/shape';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@store/app-state';\nimport { Observable } from 'rxjs/Observable';\nimport { Tool } from '@tools/types/tool';\nimport { Tools } from '@tools/types/tools';\nimport { CircleShape } from '@shapes';\n\n@Component({\n  selector: 'app-geometry-tool',\n  template: ''\n})\nexport class GeometryToolComponent implements OnInit, OnDestroy {\n  private selectedTool$: Observable<Tool>;\n  private destroy$: Subject<boolean> = new Subject<boolean>();\n  constructor(\n    private store: Store<AppState>,\n    private mouseService: MouseServiceDirective,\n    private canvasService: CanvasService\n  ) { }\n\n  ngOnInit(): void {\n    this.selectedTool$ = this.store\n      .select('app')\n      .select('selectedTool');\n\n    this.mouseService.onMouseDown()\n      .pipe(\n        withLatestFrom(this.selectedTool$),\n        takeUntil(this.destroy$)\n      )\n      .subscribe(this.handleMouseDown);\n\n  }\n\n  handleMouseDown = ([start, selectedTool]: [Point2D, Tool]): void => {\n    const shape: Shape = this.createShape(start, selectedTool);\n\n    of(start)\n      .pipe(\n        mergeMap(() => this.mouseService.onMouseMove()),\n        takeUntil(this.mouseService.onMouseUp())\n      ).subscribe(this.rectObserver(start, shape));\n\n    this.canvasService.render(shape);\n  }\n\n  rectObserver(start: Point2D, rect: Shape): PartialObserver<Point2D> {\n    return {\n      next: (end: Point2D): void => {\n        rect.transform(start, end);\n      },\n      complete: (): void => {\n        this.flushShape(rect);\n      }\n    };\n  }\n\n  flushShape(shape: Shape): void {\n    this.canvasService.complete(shape);\n    this.store.dispatch(new AppActions.CreateShape(shape));\n  }\n\n  createShape(start: Point2D, selectedTool: Tool): Shape {\n    switch (selectedTool.name) {\n      case Tools.Rect: {\n        return new RectShape(start.x, start.y);\n      }\n      case Tools.Circle: {\n        return new CircleShape(start);\n      }\n      default:\n        return;\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next(true);\n    this.destroy$.unsubscribe();\n  }\n}\n","import { Shape } from '@shapes/shape';\nimport { Point2D } from '@math/point2d';\nexport class CircleShape extends Shape {\n  public readonly type = 'circle';\n  cx: number;\n  cy: number;\n\n  constructor(\n    private center: Point2D,\n    public r: number = 0,\n    public fill: string = 'none',\n    public strokeWidth: number = 2\n  ) {\n    super();\n\n    this.cx = center.x;\n    this.cy = center.y;\n  }\n\n  getRadius(start: Point2D, end: Point2D): number {\n    const difference = Point2D.getDifference(start, end);\n\n    return Point2D.size(difference.divideBy(2));\n  }\n\n  moveTo(p: Point2D): this {\n    this.cx = p.x;\n    this.cy = p.y;\n\n    return this;\n  }\n\n  transform(start: Point2D, end: Point2D): void {\n    const midpoint = Point2D.getMidpoint(start, end);\n    const radius = this.getRadius(start, end);\n\n    this.r = radius;\n    this.moveTo(midpoint);\n  }\n}\n","import { Shape } from './shape';\nimport { PolylineShape } from '@shapes/polyline-shape';\nimport { CircleShape } from '@shapes/circle/circle';\nimport { RectShape } from '@shapes/rect/rect';\n\nexport {\n  Shape,\n  PolylineShape,\n  RectShape,\n  CircleShape\n};\n","import { Shape } from './shape';\nimport { Point2D } from '@math/point2d';\n\nexport class PolylineShape extends Shape {\n  public readonly type = 'polyline';\n  public fill = 'none';\n  public strokeLinecap = 'round';\n\n  constructor(\n    private points: Point2D[] = [],\n    public strokeWidth: number,\n    public stroke: string\n  ) {\n    super();\n  }\n\n  public toString(): string {\n    return this.points\n      .map((point: Point2D) => `${point.x},${point.y}`)\n      .join(' ');\n  }\n\n  public append(p: Point2D): void {\n    this.points.push(p);\n  }\n\n  public length(): number {\n    return this.points.length;\n  }\n\n  public transform(): void {\n  }\n}\n","import { Point2D } from '@math/point2d';\nimport { Shape } from '@shapes/shape';\n\nexport interface BoundingRect {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n}\n\nexport class RectShape extends Shape {\n  public readonly type = 'rect';\n\n  constructor(\n    public x: number = 0,\n    public y: number = 0,\n    public width: number = 0,\n    public height: number = 0,\n    public rx: number = 2,\n    public ry: number = 2,\n    public fill: string = 'none',\n    public strokeWidth: number = 2\n  ) {\n    super();\n  }\n\n  getBoundingRect(start: Point2D, end: Point2D): BoundingRect {\n    if (start.x <= end.x && start.y <= end.y) {\n      return {\n        x: start.x,\n        y: start.y,\n        width: end.x - start.x,\n        height: end.y - start.y\n      };\n    }\n\n    if (start.x <= end.x && start.y > end.y) {\n      return {\n        x: start.x,\n        y: end.y,\n        width: end.x - start.x,\n        height: start.y - end.y\n      };\n    }\n\n    if (start.x >= end.x && start.y > end.y) {\n      return {\n        x: end.x,\n        y: end.y,\n        width: start.x - end.x,\n        height: start.y - end.y\n      };\n    }\n\n    if (start.x >= end.x && start.y <= end.y) {\n      return {\n        x: end.x,\n        y: start.y,\n        width: start.x - end.x,\n        height: end.y - start.y\n      };\n    }\n  }\n\n  transform(start: Point2D, end: Point2D): void {\n\n    const { x, y, width, height }: BoundingRect = this.getBoundingRect(start, end);\n\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n  }\n}\n","import { Point2D } from '@math/point2d';\n\nexport abstract class Shape {\n  public readonly type: string;\n  public stroke = 'black';\n  public rendered = false;\n  public editing = true;\n\n  public ofType(type: string): boolean {\n    return this.type === type;\n  }\n\n  abstract transform(start: Point2D, end: Point2D): void;\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { TOOLS_TOKEN, tools } from './tools';\nimport { DrawingToolComponent } from './components/drawing-tool/drawing-tool.component';\nimport { GeometryToolComponent } from './components/geometry-tool/geometry-tool.component';\n\n@NgModule({\n  entryComponents: [\n    DrawingToolComponent,\n    GeometryToolComponent\n  ],\n  imports: [\n    CommonModule,\n    BrowserAnimationsModule\n  ],\n  declarations: [\n    DrawingToolComponent,\n    GeometryToolComponent\n  ],\n  providers: [\n    {\n      provide: TOOLS_TOKEN, useValue: tools\n    }\n  ]\n})\nexport class ToolsModule { }\n","import { InjectionToken } from '@angular/core';\nimport { Tool } from '@tools/types/tool';\nimport { DrawingToolComponent } from './components/drawing-tool/drawing-tool.component';\nimport { GeometryToolComponent } from './components/geometry-tool/geometry-tool.component';\nimport { Tools } from './types/tools';\n\nexport const tools: Tool[] = [\n  {\n    name: Tools.Pencil,\n    component: DrawingToolComponent,\n    shapeType: 'polyline',\n    imageUrl: 'assets/icons/pencil.svg'\n  },\n  {\n    name: Tools.Brush,\n    component: DrawingToolComponent,\n    shapeType: 'polyline',\n    imageUrl: 'assets/icons/brush.svg'\n  },\n  {\n    name: Tools.Rect,\n    component: GeometryToolComponent,\n    shapeType: 'rect',\n    imageUrl: 'assets/icons/rect.svg'\n  },\n  {\n    name: Tools.Circle,\n    component: GeometryToolComponent,\n    shapeType: 'circle',\n    imageUrl: 'assets/icons/circle.svg'\n  }\n];\n\nexport const TOOLS_TOKEN = new InjectionToken<Tool[]>('tools');\n","export enum Tools {\n  Pencil = 'pencil',\n  Brush = 'brush',\n  Rect = 'rect',\n  Circle = 'circle'\n}\n","import { Injectable } from '@angular/core';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '@store/app-state';\nimport { Shape } from '@tools/shapes/shape';\nimport { Observable } from 'rxjs/Observable';\nimport { from } from 'rxjs/observable/from';\nimport { Subject } from 'rxjs/Subject';\nimport { scan, filter, map, share, tap } from 'rxjs/operators';\nimport { PolylineShape } from '@tools/shapes';\nimport { OperatorFunction } from 'rxjs/interfaces';\nimport { CircleShape } from '@shapes/circle/circle';\nimport { RectShape } from '@shapes/rect/rect';\n\n@Injectable()\nexport class CanvasService {\n  private canvasHandler: Subject<Function> = new Subject<Function>();\n  private storeChanges$: Observable<Shape[]>;\n\n  public canvasShapes$: Observable<Shape[]>;\n  public polylines$: Observable<PolylineShape[]>;\n  public circles$: Observable<CircleShape[]>;\n  public rects$: Observable<RectShape[]>;\n\n  constructor(private store: Store<AppState>) {\n    this.storeChanges$ = this.store\n      .select('app')\n      .select('shapes');\n\n    this.canvasShapes$ = this.canvasHandler\n      .pipe(\n        scan((shapes: Shape[], fn: Function) => fn(shapes), []),\n        tap((shapes: Shape[]) => {\n          console.log(shapes);\n        }),\n        share()\n      );\n\n    this.polylines$ = this.getShapes$('polyline');\n    this.circles$ = this.getShapes$('circle');\n    this.rects$ = this.getShapes$('rect');\n  }\n\n  getShapes$<T extends Shape>(type: string): Observable<T[]> {\n    return <Observable<T[]>>this.canvasShapes$\n      .pipe(this.filterBy(((shape: T): boolean => shape.ofType(type))));\n  }\n\n  render = (shape: Shape): void => {\n    this.canvasHandler.next((shapeStore: Shape[]) => shapeStore.concat(shape));\n  }\n\n  complete(shape: Shape): void {\n    shape.editing = false;\n  }\n\n  filterBy(fn: Function): OperatorFunction<Shape[], Shape[]> {\n    return (source$: Observable<Shape[]>): Observable<Shape[]> => {\n      return source$.pipe(\n        map((shapes: Shape[]) => {\n          return shapes.filter((shape: Shape) => fn(shape));\n        })\n      );\n    };\n  }\n}\n","import { Action } from '@ngrx/store';\nimport { Tool } from '@tools/types/tool';\nimport { Shape } from '@tools/shapes/shape';\n\nexport const SELECT_COLOR = '[Tools] Select color';\nexport const SELECT_TOOL = '[Tools] Select tool';\nexport const CREATE_SHAPE = '[Canvas] Create shape';\nexport const CHANGE_THICKNESS = '[Adjustments] Change thickness';\n\nexport class SelectColor implements Action {\n  readonly type = SELECT_COLOR;\n\n  constructor(public payload: string) {}\n}\n\nexport class SelectTool implements Action {\n  readonly type = SELECT_TOOL;\n\n  constructor(public payload: Tool) {}\n}\n\nexport class CreateShape implements Action {\n  readonly type = CREATE_SHAPE;\n\n  constructor(public payload: Shape) {}\n}\n\nexport class ChangeThickness implements Action {\n  readonly type = CHANGE_THICKNESS;\n\n  constructor(public payload: number) {}\n}\n\nexport type All = SelectColor | SelectTool | CreateShape | ChangeThickness;\n","import { NgModule } from '@angular/core';\nimport { StoreModule } from '@ngrx/store';\nimport { StoreDevtoolsModule } from '@ngrx/store-devtools';\nimport { appReducer } from './reducers/app.reducer';\n\n@NgModule({\n  imports: [\n    StoreModule.forRoot({\n      app: appReducer\n    }),\n    StoreDevtoolsModule.instrument({\n      maxAge: 10\n    })\n  ]\n})\nexport class AppStoreModule { }\n","import { Tool } from '@tools/types/tool';\nimport { Shape } from '@tools/shapes/shape';\nimport * as AppActions from '@store/actions/app.actions';\n\nexport interface App {\n  selectedTool: Tool;\n  selectedColor: string;\n  thickness: number;\n  fontSize: number;\n  shapes: Shape[];\n}\n\nconst defaultState: App = {\n  selectedTool: null,\n  selectedColor: '#000000',\n  thickness: 2,\n  fontSize: 13,\n  shapes: []\n};\n\nexport function appReducer(state: App = defaultState, action: AppActions.All): App {\n  switch (action.type) {\n    case AppActions.SELECT_TOOL: {\n      return {\n        ...state,\n        selectedTool: action.payload\n      };\n    }\n    case AppActions.SELECT_COLOR: {\n      return {\n        ...state,\n        selectedColor: action.payload\n      };\n    }\n    case AppActions.CREATE_SHAPE: {\n      return {\n        ...state,\n        shapes: [\n          ...state.shapes,\n          action.payload\n        ]\n      };\n    }\n    case AppActions.CHANGE_THICKNESS: {\n      return {\n        ...state,\n        thickness: action.payload\n      };\n    }\n    default:\n      return state;\n  }\n}\n","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n  production: false\n};\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n"],"sourceRoot":""}